<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
        'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>

<mapper namespace="br.gov.inpi.mapper.ProtocoloMapper">


    <resultMap type="Protocolo" id="ProtocoloResult">
        <id property="id" column="ID"/>
    </resultMap>

    <insert id="inserir" parameterType="Protocolo" useGeneratedKeys="true" keyProperty="ID">
        INSERT INTO PROTOCOLO(DESPACHO_ID, NUMERO, DT_PROTOCOLO, CODIGO_SERVICO, PROCURADOR)
        VALUES(#{despacho.id}, #{numero}, #{dataFormatada}, #{codigoServico}, #{procurador} )
    </insert>


    <select id="getProtocolo" parameterType="Protocolo" resultType="Protocolo">
        SELECT ID, DESPACHO_ID, NUMERO, DT_PROTOCOLO, CODIGO_SERVICO, PROCURADOR FROM PROTOCOLO
        WHERE DESPACHO_ID = #{despacho.id}
        AND NUMERO = #{numero}
    </select>

    <update id="atualizar" parameterType="Protocolo">
        UPDATE PROTOCOLO
        SET DESPACHO_ID = #{despacho.id},
        NUMERO = #{numero},
        DT_PROTOCOLO = #{dataFormatada},
        CODIGO_SERVICO = #{codigoServico},
        PROCURADOR = #{procurador}
        WHERE ID = #{id}
    </update>

</mapper>